import{_ as l,o as e,c as i,e as d}from"./app-ab31641a.js";const a={},c=d('<h1 id="vsf-冲突检测配置与调试命令" tabindex="-1"><a class="header-anchor" href="#vsf-冲突检测配置与调试命令" aria-hidden="true">#</a> VSF 冲突检测配置与调试命令</h1><h2 id="vsf-mad-lacp-enable" tabindex="-1"><a class="header-anchor" href="#vsf-mad-lacp-enable" aria-hidden="true">#</a> <code>vsf mad lacp enable</code></h2><ul><li>命令： <ul><li><code>vsf mad lacp enable</code></li><li><code>no vsf mad lacp enable</code></li></ul></li><li>功能：打开指定 port-channel 端口支持 LACP MAD 检测功能。该命令的no 命令为关闭 port-channel 口上的 LACP MAD 检测功能。</li><li>参数：无。</li><li>缺省情况：LACP MAD 检测功能关闭。。</li><li>命令模式： port-channel 端口配置模式。</li><li>运行模式： VSF 运行模式。</li><li>VSF 角色： VSF 主控。</li><li>使用指南：处于VSF 模式的设备才能配置该命令，配置指定的port-channel 为 LACP MAD 冲突检测组，组成员发送带 MAD 的 TLV 报文。</li></ul><h2 id="vsf-mad-bfd-enable" tabindex="-1"><a class="header-anchor" href="#vsf-mad-bfd-enable" aria-hidden="true">#</a> <code>vsf mad bfd enable</code></h2><ul><li>命令： <ul><li><code>vsf mad bfd enable</code></li><li><code>no vsf mad bfd enable</code></li></ul></li><li>功能：打开指定三层接口支持BFD MAD 检测功能。该命令的no 命令为关闭指定三层接口的BFD MAD 检测功能。</li><li>参数：无。</li><li>缺省情况：BFD MAD 检测功能关闭。</li><li>命令模式：接口配置模式。</li><li>运行模式：VSF 运行模式。</li><li>VSF 角色：VSF 主控。</li><li>使用指南：处于VSF 模式的设备才能配置该命令，配置指定的接口支持BFD MAD 检测功能。</li></ul><h2 id="vsf-mad-ip-address" tabindex="-1"><a class="header-anchor" href="#vsf-mad-ip-address" aria-hidden="true">#</a> <code>vsf mad ip address</code></h2><ul><li>命令： <ul><li><code>vsf mad ip address &lt;ip-address&gt; &lt;ip-mask&gt; member &lt;member-number&gt;</code></li><li><code>no vsf mad ip address &lt;ip-address&gt; &lt;ip-mask&gt; member &lt;member-number&gt;</code></li></ul></li><li>功能：指定接口创建成员设备对应的BFD 会话。</li><li>参数：<code>&lt;ip-address&gt;</code>：IP 地址。<code>&lt;ip-mask&gt;</code>：ip 地址掩码。<code>&lt;member-number&gt;</code>：成员设备编号，范围为：1-16。</li><li>缺省情况：接口未配置MAD 地址。</li><li>命令模式：接口配置模式。</li><li>运行模式：VSF 运行模式。</li><li>VSF 角色：VSF 主控。</li><li>使用指南：处于VSF 模式的设备才能配置该命令，配置该命令的同时创建以配置地址为远端地址的会话。</li></ul><h2 id="vsf-mad-exclude" tabindex="-1"><a class="header-anchor" href="#vsf-mad-exclude" aria-hidden="true">#</a> <code>vsf mad exclude</code></h2><ul><li>命令： <ul><li><code>vsf mad exclude</code></li><li><code>no vsf mad exclude</code></li></ul></li><li>功能：当设备进入 recovery 状态后，配置该命令的端口可以不被关闭，继续正常转发。该命令的 no 命令为取消 MAD 保留端口配置。</li><li>参数：无。</li><li>缺省情况：设备没有配置 MAD 保留端口。</li><li>命令模式：端口配置模式。</li><li>运行模式：VSF 运行模式。</li><li>VSF 角色：VSF 主控。</li><li>使用指南：VSF 链路断开后，网络中会存在两台全局配置完全相同的设备，这些设备连接到网络时可能会引起网络故障。为了防止这种情况发生，系统会进行多 Active 检测，最终只保留一台 Active 设备，其它设备都进入 Recovery 状态，并且关闭 Recovery 状态设备上的所有业务接口。使用该命令可以让指定的端口不被关闭，具体哪些接口需要保留由用户决定。</li></ul><h2 id="vsf-mad-restore" tabindex="-1"><a class="header-anchor" href="#vsf-mad-restore" aria-hidden="true">#</a> <code>vsf mad restore</code></h2><ul><li>命令： <ul><li><code>vsf mad restore</code></li></ul></li><li>功能：本命令将处于 Recovery 状态的 VSF 恢复到正常工作状态。</li><li>参数：无。</li><li>缺省情况：VSF 没有配置 restore。</li><li>命令模式：全局配置模式。</li><li>运行模式：VSF 运行模式。</li><li>VSF 角色：VSF 主控。</li><li>使用指南：VSF 链路断裂发生多 Active 冲突，原 VSF 分裂为两个状态为 Active 的 VSF，为了防止网络中配置冲突，VSF 系统会通过多Active 检测机制，将其中一个VSF 的状态保持为 Active（让它继续正常工作），其它 VSF 的状态修改为 Recovery（处于该状态的VSF 不能处理业务报文）。如果处于 Active 状态的 VSF 发生故障不能工作，此时可以通过本命令将处于 Recovery 状态的VSF 恢复到正常工作状态。</li></ul><h2 id="show-mad-config" tabindex="-1"><a class="header-anchor" href="#show-mad-config" aria-hidden="true">#</a> <code>show mad config</code></h2><ul><li>命令： <ul><li><code>show mad config</code></li></ul></li><li>功能：显示 VSFMAD 的配置情况，通过该命令可以查看 LACP MAD 和 BFD MAD 的配置。</li><li>参数：无。</li><li>缺省情况：无。</li><li>命令模式：特权模式和配置模式。</li><li>运行模式：VSF 运行模式。</li><li>VSF 角色：VSF 主控。</li><li>使用指南：无。</li></ul>',13),o=[c];function r(s,t){return e(),i("div",null,o)}const h=l(a,[["render",r],["__file","16-2_VSF-MAD.html.vue"]]);export{h as default};
